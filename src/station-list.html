<html><head><link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">

</head><body><dom-module id="station-list">

  <template>
    <style>.selector{width:250px;}</style>

    <paper-dropdown-menu value="{{value}}" class="selector" label="[[label]]" required$="[[required]]" vertical-align$="[[vertical-align]]" aria-label$="[[aria-label]]" horizontal-align$="[[horizontal-align]]">
      <paper-listbox id="box" class="dropdown-content">
        <template is="dom-repeat" items="[[stations]]" as="station">
          <paper-item>[[station]]</paper-item>
        </template>
      </paper-listbox>
    </paper-dropdown-menu>

  </template>

  <script>Polymer({is:"station-list",properties:{stations:{type:Array,value:function(){return app.stationNames}},useLocation:{type:Boolean,value:!1},value:{type:String,notify:!0}},observers:["_closestStation(stations)"],_distance:function(t,i,n,e){var o=t-n,a=i-e;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))},ready:function(){this.useLocation&&this._closestStation(this.stations)},_closestStation:function(t){var i=this;!1 in navigator||1!=this.useLocation||0==t.length||navigator.geolocation.getCurrentPosition(function(n){var e=n.coords.latitude,o=n.coords.longitude,a=app.stations.filter(function(i){return t.indexOf(i.title)!=-1}),s=a.reduce(function(t,n){var a=i._distance(e,o,n.latitude,n.longitude);return a<t.distance||!t.distance?(n.distance=a,n):t}),r=t.indexOf(s.title);i.$.box.selected=r})}});</script>
</dom-module>
</body></html>